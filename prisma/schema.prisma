generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Child {
  id        Int            @id @default(autoincrement())
  name      String
  age       Int
  createdAt DateTime       @default(now())
  agenda    AgendaItem[]
  emotions  EmotionEntry[]
}

model AgendaItem {
  id       Int      @id @default(autoincrement())
  childId  Int
  date     DateTime
  title    String
  done     Boolean  @default(false)
  child    Child    @relation(fields: [childId], references: [id], onDelete: Cascade)

  @@index([childId])
  @@index([date])
}

enum Emotion {
  happy
  sad
  angry
  calm
  excited
  tired
}

model EmotionEntry {
  id       Int      @id @default(autoincrement())
  childId  Int
  date     DateTime
  emotion  Emotion
  notes    String?
  child    Child    @relation(fields: [childId], references: [id], onDelete: Cascade)

  @@unique([childId, date])
}
